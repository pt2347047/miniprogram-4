<!--lucky.wxml-->
<navigation-bar title="æ¯æ—¥å¹¸è¿" back="{{false}}" color="black" background="#FFF"></navigation-bar>

<!-- Tabåˆ‡æ¢ -->
<view class="tab-container">
  <view class="tab-item {{activeTab === 'lucky' ? 'active' : ''}}" bindtap="switchTab" data-tab="lucky">
    æ¯æ—¥å¹¸è¿
  </view>
  <view class="tab-item {{activeTab === 'share' ? 'active' : ''}}" bindtap="switchTab" data-tab="share">
    æ¯æ—¥åˆ†äº«
  </view>
</view>

<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- æ¯æ—¥å¹¸è¿ Tab -->
    <view wx:if="{{activeTab === 'lucky'}}" class="tab-content">
      <!-- è¾“å…¥æè¿°åŒºåŸŸ -->
      <view class="input-container">
        <view class="input-title">æè¿°ä½ çš„æ„¿æœ›æˆ–å½“å‰çŠ¶æ€</view>
        <textarea
          class="desc-input"
          placeholder="è¯·è¾“å…¥ä½ çš„æè¿°ï¼Œä¾‹å¦‚ï¼šä»Šå¤©å¿ƒæƒ…ä¸é”™ï¼Œå¸Œæœ›æœ‰å¥½è¿æ°”..."
          value="{{desc}}"
          bindinput="onInput"
          maxlength="200"
          show-confirm-bar="{{false}}"
          auto-height="{{true}}"
        />
      </view>

      <!-- ç”ŸæˆæŒ‰é’® -->
      <button class="submit-btn" bindtap="onSubmit" disabled="{{loading}}">
        {{loading ? 'å¹¸è¿ç”Ÿæˆä¸­...' : 'ç”Ÿæˆæˆ‘çš„å¹¸è¿æ•°å­—'}}
      </button>

      <!-- ç”Ÿæˆç»“æœå±•ç¤º -->
      <view wx:if="{{hasGenerated && lotteryNumbers && lotteryNumbers.length > 0}}" class="lottery-container">
        <view class="lottery-title">ä½ çš„å¹¸è¿æ•°å­—</view>
        <view class="lottery-numbers">
          <view wx:for="{{lotteryNumbers}}" wx:key="index" class="lottery-ball {{index < 6 ? 'red' : 'blue'}}">
            {{item}}
          </view>
        </view>
      </view>
      
      <view wx:if="{{hasGenerated && recommendation}}" class="recommendation-container">
        <view class="recommendation-title">æ¨èç†ç”±</view>
        <view class="recommendation-text">{{recommendation}}</view>
      </view>
    </view>

    <!-- æ¯æ—¥åˆ†äº« Tab -->
    <view wx:if="{{activeTab === 'share'}}" class="tab-content">
      <view class="share-list">
        <view wx:for="{{shareList}}" wx:key="id" class="share-item">
          <view class="share-header">
            <image class="user-avatar" src="{{item.avatar}}" mode="aspectFill"></image>
            <view class="user-info">
              <text class="user-name">{{item.userName}}</text>
              <text class="share-time">{{item.time}}</text>
            </view>
          </view>
          <view class="share-content">{{item.content}}</view>
          <view class="share-actions">
            <view class="like-btn {{item.isLiked ? 'liked' : ''}}" bindtap="toggleLike" data-id="{{item.id}}">
              <text class="like-icon">{{item.isLiked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
              <text class="like-count">{{item.likeCount}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</scroll-view> 